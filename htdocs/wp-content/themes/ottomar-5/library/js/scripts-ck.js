/*
Bones Scripts File
Author: Filippo Della Casa

This file should contain any js scripts you want to add to the site.
Instead of calling it in the header or throwing it inside wp_head()
this file will be called automatically in the footer so as not to
slow the page load.

*/// IE8 ployfill for GetComputed Style (for Responsive Script below)
window.getComputedStyle||(window.getComputedStyle=function(e,t){this.el=e;this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;t=="float"&&(t="styleFloat");n.test(t)&&(t=t.replace(n,function(){return arguments[2].toUpperCase()}));return e.currentStyle[t]?e.currentStyle[t]:null};return this});(function(e){function c(){n.setAttribute("content",s);o=!0}function h(){n.setAttribute("content",i);o=!1}function p(t){l=t.accelerationIncludingGravity;u=Math.abs(l.x);a=Math.abs(l.y);f=Math.abs(l.z);!e.orientation&&(u>7||(f>6&&a<8||f<8&&a>6)&&u>5)?o&&h():o||c()}if(!(/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1))return;var t=e.document;if(!t.querySelector)return;var n=t.querySelector("meta[name=viewport]"),r=n&&n.getAttribute("content"),i=r+",maximum-scale=1",s=r+",maximum-scale=10",o=!0,u,a,f,l;if(!n)return;e.addEventListener("orientationchange",c,!1);e.addEventListener("devicemotion",p,!1)})(this);var FDC={};(function(e){e.FDC={menu_lock:!1,user_click:!1,history_step:0,is_scrolling:!1,is_ajax:!0,init:function(t){e.$=t;this.$win=t(e);this.$doc=t(document);this.notouch=t("html").hasClass("no-touch");this.is_mobile=t("#container").hasClass("mobile");this.is_tablet=t("#container").hasClass("tablet");this.is_desktop=t("#container").hasClass("desktop");this.$win.on("scroll",function(e){FDC.onScroll(e)});this.$win.on("resize",function(e){FDC.onResize(e)});this.initMenu();this.initPageFunctions(t("body"),!0)},onScroll:function(e){FDC.is_scrolling=!0},onResize:function(e){var t=this.$win.width(),n=this.$win.height();if($("#wpadminbar").length>0){var r=$("#wpadminbar").height();n-=r;var i=parseInt($(".wrap").css("padding-right"),10)}t<481;t>481;t>=768;t>1030;$("#container").width(t);$("#container").height(n);$("#content").width(t);$("#drawer").height(n);$("#inner-drawer").height(n-$("#inner-drawer").position().top)},initMenu:function(){$("#mnu-icon").data("open",!1);$("#mnu-icon").click(function(e){FDC.toggleDrawer()});this.notouch&&$(document).on("mousemove",this.interactiveDrawer);this.initAjax()},openMenu:function(e){if($("#mnu-icon").data("open")==e)return;$("#mnu-icon").data("open",e);var t=e?$("#drawer").width():0;$(".header").transition({x:t},333,"easeInOutQuint");$("#content").transition({x:t},333,"easeInOutQuint")},toggleDrawer:function(){this.openMenu(!$("#mnu-icon").data("open"))},interactiveDrawer:function(e){var t=e.clientX,n=e.clientY;t<$("#drawer").width()&&n<FDC.$win.height()/4&&!$("#mnu-icon").data("open")&&FDC.openMenu(!0);t>$("#drawer").width()&&$("#mnu-icon").data("open")&&FDC.openMenu(!1)},initPageFunctions:function(e,t){var n="";if(e.hasClass("home")){this.initHome(t);n="home"}if(e.hasClass("page-template-page-bio-php")){this.initBio(t);n="page-template-page-bio-php"}if(e.hasClass("single-work")){this.initSingleWork(t);n="single-work"}n!=""&&(t?$("body").addClass(n):$("body").removeClass(n));t&&this.$win.trigger("resize")},initHome:function(e){e&&SPLASH.init(this,"onSPLASHReady");e||SPLASH.end()},onSPLASHReady:function(){console.log("onSPLASHReady")},initBio:function(e){if(e){$(".mnu").appendTo(".header");$(".mnu a").on("click",this.onClickMenuBio);$("#content").on("scroll",this.onScrollBio);this.onResize()}else{$(".mnu a").off("click",this.onClickMenuBio);$("#content").off("scroll",this.onScrollBio);$(".mnu").remove()}},onClickMenuBio:function(e){e.preventDefault();$(".mnu a").each(function(e,t){$(this).hasClass("selected")&&$(this).removeClass("selected")});$(this).addClass("selected");var t=$(this).html(),n=$("#"+t).offset().top-$("ul.blocks").position().top-2*parseInt($("h1").css("margin-top"),10);$("#content").animate({scrollTop:n},777,"swing")},onScrollBio:function(e){return;var t,n,r,i},initSingleWork:function(e){e&&this.onResize()},initAjax:function(){if(!this.is_ajax)return;$("a.ajax, li.menu-item a").click(function(e){e.preventDefault();var t=$(this).attr("href"),n=History.getState();if(n.url==t)return;FDC.user_click=!0;FDC.loadAJAX(t)});this.initHistory()},loadAJAX:function(e){$("#inner-content").transition({opacity:0},333,"easeOutQuint");$("#content").animate({scrollTop:0},333,"swing");NProgress.start();$.ajax({url:e+"?ajaxreq=true",dataType:"html",cache:!0,success:function(t){FDC.addContentAJAX(t,e);NProgress.done(!0)}})},addContentAJAX:function(e,t){this.initPageFunctions($("body"),!1);var n=$(e),r=n.find("#body-injected"),i=n.find("#inner-content");$("#inner-content").empty().html(i.html());$("#inner-content").transition({opacity:1},777,"easeOutQuint");this.initPageFunctions(r,!0);this.user_click&&this.updateHistory(t,r.attr("data-title"))},initHistory:function(){this.history_step=0;var t=History.getState();History.Adapter.bind(e,"statechange",function(){var e=History.getState();FDC.user_click?FDC.user_click=!1:FDC.routePage(e.url)});return t.url},updateHistory:function(e,t){var n=History.getState();this.history_step++;History.pushState({state:this.history_step,rand:Math.random()},t,e)},routePage:function(e){this.loadAJAX(e)}}})(this);var NProgress=NProgress||{},History=History||{};jQuery(document).ready(function(e){NProgress.configure({minimum:.3,trickleRate:.1,trickleSpeed:377});NProgress.start();FDC.init(e)});jQuery(window).load(function(e){NProgress.done(!0)});