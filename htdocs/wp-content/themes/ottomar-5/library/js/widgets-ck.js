/* SPLASH SLIDESHOW ************************************/(function(e,t){e.SPLASH={index:0,_loaded:[],slides:[],captions:[],time:4e3,timeTransition:1377,n:0,timeout:-1,autoplay:!0,controller:undefined,callbacks:{},init:function(n,r){this.controller=n;this.callbacks=r;this.n=t(".slide").length;t(".slide").each(function(e,n){var r=t(this);SPLASH.slides[e]=r;SPLASH.captions[e]=r.find("img").attr("data-caption")||""});t("#bg-slideshow").imagesLoaded().done(function(){var e=SPLASH.slides[0],t=e.find(".bg");e.css({"background-image":"url("+t.attr("src")+")","z-index":0});t.remove();SPLASH._loaded[0]=!0;SPLASH.rearrangeThumbs(e);SPLASH.loadImages()});t(e).on("resize",this.onResize);t(document).on("keydown",this.onKeyPress);this.onResize()},loadImages:function(){for(var e=1;e<this.n;e++){this._loaded[e]=!1;var n=this.slides[e],r=n.find(".bg");r.attr("src",r.attr("data-src"));n.imagesLoaded().done(function(e){var n=parseInt(t(e).attr("data-rel"),10),r=SPLASH.slides[n],i=r.find(".bg");r.css({"background-image":"url("+i.attr("src")+")","z-index":n,opacity:0});i.remove();SPLASH.rearrangeThumbs(r);SPLASH._loaded[n]=!0})}this.start()},rearrangeThumbs:function(e){e.find(".thumb").each(function(e,n){t(this).attr("src",t(this).attr("data-src"));t(this).css({opacity:e==0?1:0})});e.data("index_thumb",0);e.data("index_max",e.find(".thumb").length)},moveThumbs:function(e,n){var r=e.data("interval");if(!n){clearInterval(r);e.data("interval",null);return}if(r)return;r=setInterval(function(){var n=e.data("index_thumb");n++;n>=e.data("index_max")&&(n=0);e.data("index_thumb",n);e.find(".thumb").each(function(e,r){t(this).transitionStop();n==e?t(this).transition({opacity:1},0):t(this).transition({opacity:0},0)})},1e3);e.data("interval",r)},start:function(){this.callbacks.onReady&&this.controller[this.callbacks.onReady]();this.setImage(0,1);t(".arrow").click(function(e){t(this).hasClass("aleft")?SPLASH.prev():SPLASH.next()});t(".arrow").css({"z-index":this.n+2});t("#caption").css({"z-index":this.n+1});t("#bg-slideshow").swipe({swipe:function(e,t,n,r,i){t==="left"&&SPLASH.next();t==="right"&&SPLASH.prev()},threshold:10})},next:function(){var e=SPLASH.index+1;e>=SPLASH.n&&(e=0);SPLASH.setImage(e,1)},prev:function(){var e=SPLASH.index-1;e<0&&(e=SPLASH.n-1);SPLASH.setImage(e,-1)},setImage:function(e,t){clearTimeout(this.timeout);if(this._loaded[e]){var n=this.n,r,i=1;while(n--){r=this.slides[n];r.transitionStop();if(n===e){r.css({"z-index":this.n});r.css({opacity:0})}else if(n===this.index){r.css({"z-index":this.n-1});r.css({opacity:1});this.moveThumbs(r,!1)}else{r.css({"z-index":t>0?this.n-1-i:i});i++}}r=this.slides[e];r.transition({opacity:1},this.timeTransition,"easeOutQuad");this.moveThumbs(r,!0);this.index=e;this.setCaption()}this.timeout=setTimeout(this.next,this.time+this.timeTransition)},setCaption:function(){t("#caption").html(this.slides[this.index].find(".caption").html())},onKeyPress:function(e){if(e.keyCode===39){t(".aright").mouseover();t(".aright").click()}if(e.keyCode===37){t(".aleft").mouseover();t(".aleft").click()}},onResize:function(){var n=t(e).width(),r=t(e).height(),i=parseInt(t("#bg-slideshow").css("border-width"),10);t("#wpadminbar").length>0&&(r-=t("#wpadminbar").height());console.log(i);t("#bg-slideshow").width(n-i*2);t("#bg-slideshow").height(r-i*2);t(".slide").width(n-i*2);t(".slide").height(r-i*2)}}})(this,jQuery);(function(e,t){e.AL_SLIDESHOW={index:0,_loaded:[],or_sizes:[],slides:[],time:4e3,timeTransition:1377,n:0,timeout:-1,autoplay:!0,backTofirst:!0,controller:undefined,callbacks:{},post:{},firstTime:!0,m_top:120,m_left:0,uniform_high:!0,average_hight:0,init:function(n,r,i){this.controller=n;this.callbacks=r;this.post=i;this.n=t(".slide-work").length;t(".slide-work").each(function(e,n){var r=t(this),i=r.find("img");i.css({opacity:e===0?1:0});AL_SLIDESHOW.slides[e]=r;AL_SLIDESHOW.average_hight+=parseInt(i.attr("height"),10);if(e===AL_SLIDESHOW.n-1){AL_SLIDESHOW.average_hight=Math.round(AL_SLIDESHOW.average_hight/AL_SLIDESHOW.n);AL_SLIDESHOW.onResize()}});t("#slideshow-work").imagesLoaded().done(function(e){AL_SLIDESHOW._loaded[0]=!0;AL_SLIDESHOW.or_sizes[0]=[t(e).attr("width"),t(e).attr("height")];AL_SLIDESHOW.setPostOverlay(!0);AL_SLIDESHOW.loadImages();AL_SLIDESHOW.callbacks.onReady&&AL_SLIDESHOW.controller[AL_SLIDESHOW.callbacks.onReady]()});t(e).on("resize",this.onResize)},setPostOverlay:function(e){var n=this.slides[0];if(e){var r='<div id="post">';r+='<div class="int">';r+='<div class="tit">';r+=this.post.title;r+="</div>";r+='<div class="loc">';r+=this.post.location;r+="</div>";r+="</div>";r+="</div>";n.append(r);this.onResize();this.setClickSlideShow(!0)}else t("#post").remove()},loadImages:function(){for(var e=1;e<this.n;e++){this._loaded[e]=!1;var n=this.slides[e],r=n.find("img");r.attr("src",r.attr("data-src"));if(!r.attr("data-src")){n.addClass("img-broken");this._loaded[e]=!0}n.imagesLoaded().done(function(e){var n=parseInt(t(e).attr("data-rel"),10);AL_SLIDESHOW._loaded[n]=!0;var r=AL_SLIDESHOW.slides[n];r.removeClass("img-loading");r.find("img").transition({opacity:1},777,"easeOutCirc");AL_SLIDESHOW.or_sizes[n]=[t(e).attr("width"),t(e).attr("height")]})}t(document).on("keydown",this.onKeyPress);t(".arrow").click(function(e){t(this).hasClass("aleft")?AL_SLIDESHOW.prev():AL_SLIDESHOW.next()});t(".arrow").css({"z-index":this.n+1});t(".aright").transition({opacity:1},777,"easeOutExpo");t("#slideshow-work img, #post").swipe({swipe:function(e,t,n,r,i){t==="left"&&AL_SLIDESHOW.next();t==="right"&&AL_SLIDESHOW.prev()},threshold:10})},start:function(){},next:function(){var e=AL_SLIDESHOW.index+1;e>=AL_SLIDESHOW.n&&(e=0);AL_SLIDESHOW.setImage(e,1)},prev:function(){var e=AL_SLIDESHOW.index-1;e<0&&(e=AL_SLIDESHOW.n-1);AL_SLIDESHOW.setImage(e,-1)},setClickSlideShow:function(n){n&&t("#slideshow-work").click(function(n){var r=n.clientX,i=n.clientY,s=AL_SLIDESHOW.slides[AL_SLIDESHOW.index].find("img");if(r>=s.offset().left&&r<=s.offset().left+s.width()&&i>=s.offset().top&&i<=s.offset().top+s.height()){if(AL_SLIDESHOW.firstTime&&!AL_SLIDESHOW.backTofirst){AL_SLIDESHOW.next();return}r<t(e).width()/2?AL_SLIDESHOW.prev():AL_SLIDESHOW.next()}})},setImage:function(n,r){if(this.firstTime&&r<0){t(".aleft").transition({opacity:0},377,"easeOutExpo");return}clearTimeout(this.timeout);var i=t(e).width();if(this.firstTime){this.firstTime=!1;var s=this.slides[0].find("#post"),o=s.position().left;s.data("x",o);s.transition({left:r>0?o-2*i:o+2*i},477,"easeInExpo",function(){AL_SLIDESHOW.backTofirst||AL_SLIDESHOW.setPostOverlay(!1)});t(".aleft").transition({opacity:1},777,"easeOutExpo")}else if(!this.firstTime&&n==this.slides.length-1&&r<0){this.firstTime=!0;t(".aleft").transition({opacity:0},477,"easeOutExpo");var s=this.slides[0].find("#post");s.transition({left:s.data("x")},477,"easeInExpo",function(){})}else{var u=this.n,a,f=this.slides[n],l=1;while(u--){a=this.slides[u];if(u===n)a.css({"z-index":this.n});else if(u===this.index)a.css({"z-index":this.n-1});else{a.css({"z-index":r>0?this.n-1-l:l});l++}}a=this.slides[this.index];r>0?f.css({left:i}):f.css({left:-i});if(n===0&&this.backTofirst){this.firstTime=!0;var s=this.slides[0].find("#post");s.css({left:"50%"});this.onResize(null);r<0&&this.slides[0].css({left:-i})}a.transition({left:r>0?-i:i},577,"easeInExpo");f.transition({left:0},777,"easeOutExpo");this.index=n}},onKeyPress:function(e){if(e.keyCode===39){t(".aright").mouseover();t(".aright").click()}if(e.keyCode===37){t(".aleft").mouseover();t(".aleft").click()}},onResize:function(n){var r=AL_SLIDESHOW,i=t(e).width(),s=t(e).height();t("#slideshow-work").width(i);t("#slideshow-work").height(s);t(".slide-work").width(i);t(".slide-work").height(s);var o=r.n;while(o--){var u=r.slides[o],a=u.find("img");r.resizeImg(o,a,i,s);a.css({"margin-left":-a.width()/2,"margin-top":-a.height()/2});o===r.index?u.css({left:0}):u.css({left:i});if(o===0&&r.firstTime){var f=u.find("#post");if(f){f.width(a.width());f.height(a.height());f.css({"margin-left":-a.width()/2,"margin-top":-a.height()/2});var l=f.find(".int");l.css({"margin-left":-l.width()/2,"margin-top":-l.height()/2+30})}}}},resizeImg:function(e,t,n,r){var i=t.attr("width"),s=t.attr("height"),o=n-this.m_left*2,u=r-this.m_top*2;u<240&&(u=r-120);if(this.uniform_high){var a=this.average_hight<u?this.average_hight:u;t.width(i*a/s);t.height(a)}else if(s>u||i>o){if(s>u){t.height(u);t.width(i*u/s)}if(i>o){t.width(o);t.height(s*o/i)}}else{t.width(i);t.height(s)}}}})(this,jQuery);