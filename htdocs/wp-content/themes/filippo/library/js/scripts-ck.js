/*
Bones Scripts File
Author: Filippo Della Casa

This file should contain any js scripts you want to add to the site.
Instead of calling it in the header or throwing it inside wp_head()
this file will be called automatically in the footer so as not to
slow the page load.

*/// IE8 ployfill for GetComputed Style (for Responsive Script below)
window.getComputedStyle||(window.getComputedStyle=function(e,t){this.el=e;this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;t=="float"&&(t="styleFloat");n.test(t)&&(t=t.replace(n,function(){return arguments[2].toUpperCase()}));return e.currentStyle[t]?e.currentStyle[t]:null};return this});(function(e){function c(){n.setAttribute("content",s);o=!0}function h(){n.setAttribute("content",i);o=!1}function p(t){l=t.accelerationIncludingGravity;u=Math.abs(l.x);a=Math.abs(l.y);f=Math.abs(l.z);!e.orientation&&(u>7||(f>6&&a<8||f<8&&a>6)&&u>5)?o&&h():o||c()}if(!(/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1))return;var t=e.document;if(!t.querySelector)return;var n=t.querySelector("meta[name=viewport]"),r=n&&n.getAttribute("content"),i=r+",maximum-scale=1",s=r+",maximum-scale=10",o=!0,u,a,f,l;if(!n)return;e.addEventListener("orientationchange",c,!1);e.addEventListener("devicemotion",p,!1)})(this);var FDC={};(function(e){e.FDC={site_title:"FDC",menu_lock:!1,user_click:!1,history_step:0,is_scrolling:!1,is_ajax:!1,init:function(t){e.$=t;this.$win=t(e);this.$doc=t(document);this.notouch=t("html").hasClass("no-touch");this.is_home=t("body").hasClass("home");this.is_single_work=t("body").hasClass("single-work");this.site_url=t("#container").attr("data-site-url");this.base_url=t("#container").attr("data-base-url");this.is_mobile=t("#container").attr("data-mobile")=="mobile";this.is_desktop=t("#container").hasClass("desktop");this.obj_selected={};this.$win.on("scroll",function(e){FDC.onScroll(e)});this.$win.on("resize",function(e){FDC.onResize(e)});this.is_home&&this.initHome();this.initMenu();this.$win.trigger("resize")},onScroll:function(e){FDC.is_scrolling=!0},onResize:function(e){var t=this.$win.width(),n=this.$win.height();t<481;t>481;t>=768;t>1030},initMenu:function(){},initHome:function(){},onLoadHome:function(){if(this.is_ajax){var e=this.initHistory();console.log("initUrl = "+e+", base_url = "+this.base_url);if(e!=this.base_url){this.routePage(e);return}this.obj_selected.href=this.base_url}},loadPage:function(e,t){if(this.obj_selected&&this.obj_selected.href==e.attr("href"))return;this.obj_selected={action:"ajax",href:e.attr("href"),is_mobile:this.is_mobile,post_type:t,$a:e};this.loadAJAX(this.obj_selected)},onKeyPress:function(e){},addContent:function(e,t){},initAjaxContent:function(e,t){},loadAJAX:function(e){$.ajax({url:this.site_url+"/wp-admin/admin-ajax.php",type:"POST",dataType:"html",cache:!1,data:{action:e.action,href:e.href,is_mobile:e.is_mobile,post_type:e.post_type},success:function(e){FDC.addContent(!0,e)}});this.updateHistory(e.href,e.$a.text())},initHistory:function(){this.history_step=0;var t=History.getState();History.Adapter.bind(e,"statechange",function(){var e=History.getState();FDC.user_click?FDC.user_click=!1:FDC.routePage(e.url)});return t.url},updateHistory:function(e,t){var n=History.getState();this.user_click=!0;e===""&&(e=this.base_url);if(n.url===e)return;this.history_step++;History.pushState({state:this.history_step,rand:Math.random()},this.site_title+" - "+t,e)},routePage:function(e){console.log(">>>> routePage, href = "+e);var t=!1;$("a").each(function(n,r){var i=$(this);if(i.attr("href")===e&&!t){t=!0;setTimeout(function(){i.trigger("mouseover");setTimeout(function(){i.click()},177)},177)}});!t}}})(this);var NProgress=NProgress||{},History=History||{};jQuery(document).ready(function(e){NProgress.configure({minimum:.3,trickleRate:.1,trickleSpeed:377});NProgress.start();FDC.init(e)});jQuery(window).load(function(e){NProgress.done(!0)});