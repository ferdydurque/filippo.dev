var sis;if(sis){if("object"!==typeof sis)throw Error("sis already exists and not an object");}else sis={};
jQuery(function(){var e=jQuery(document.body),d=null;jQuery('select[name="action"], select[name="action2"]').append(jQuery("<option/>").attr("value","sis-regenerate").text(sis.regenerate));e.on("click",".sis-regenerate-one",function(b){b.preventDefault();new d(this)});jQuery("#doaction, #doaction2").on("click",function(b){if("sis-regenerate"===jQuery(this).parent().find("select").val()){var a=jQuery('#the-list .check-column input[type="checkbox"]:checked').closest("tr").find(".sis-regenerate-one");
0<a.length&&(b.preventDefault(),a.each(function(){new d(this)}))}});d=function(b){({list:{},parent:null,el:null,id:null,messageZone:"",init:function(a){this.el=a;this.parent=a.closest("tr");this.id=this.el.data("id");this.list={id:this.id,title:""};this.messageZone=this.parent.find(".title em");0===this.parent.find(".title em").length&&this.parent.find(".title strong").after("<em/>");this.messageZone=this.parent.find(".title em");this.parent.hasClass("ajaxing")||this.regenItem()},setMessage:function(a){this.messageZone.html(" - "+
a).addClass("updated").addClass("fade").show()},regenItem:function(){var a=this;jQuery.ajax({url:sis.ajaxUrl,type:"POST",dataType:"json",cache:!1,data:{action:"sis_rebuild_image",id:this.list.id,nonce:sis.regen_one},beforeSend:function(){a.parent.fadeTo("fast","0.2").addClass("ajaxing")},success:function(c){var b="",b=!c.src||!c.time||c.error||"object"!==typeof c?"object"!==typeof c?b=sis.phpError:c.error:sis.soloRegenerated.replace("%s",c.time);a.setMessage(b);a.parent.fadeTo("fast","1").removeClass("ajaxing")}})}}).init(jQuery(b))}});